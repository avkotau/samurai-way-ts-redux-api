"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[814],{4814:function(t,e,r){r.r(e),r.d(e,{default:function(){return $},refreshProfile:function(){return W}});var s=r(1413),n=r(5671),o=r(3144),i=r(136),a=r(5716),l=r(2791),u={},c=r(364),d=r(5555),p="MyPosts_myPostsContainer__+FEe4",h="MyPosts_title__8aP6T",f="MyPosts_posts__yS2tl",x={post:"Post_post__NPNF1"},m=r(4513),j=r(184),v=function(t){(0,i.Z)(r,t);var e=(0,a.Z)(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:x.post,children:[(0,j.jsx)("img",{src:this.props.photo||m,alt:"My photo",className:x.photo}),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:this.props.published}),(0,j.jsx)("div",{children:this.props.message}),(0,j.jsxs)("span",{children:[(0,j.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"heart",className:"svg-inline--fa fa-heart fa-lg Post_icon__tP710",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,j.jsx)("path",{fill:"currentColor",d:"M0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84.02L256 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 .0003 232.4 .0003 190.9L0 190.9z"})}),this.props.like]})]})]})})}}]),r}(l.Component),g=v,b=r(3720),y=r(3719),S=r(4193),P=(0,S.BS)(100),k=function(t){return(0,j.jsx)(b.l0,{onSubmit:function(e,r){t.onSubmit(e),r.reset()},render:function(t){var e=t.handleSubmit,r=t.valid,s=t.values;return(0,j.jsxs)("form",{onSubmit:e,children:[(0,j.jsx)(b.gN,{name:"message",type:"textarea",placeholder:"Enter your message",validate:(0,S.A3)(P),component:y.N}),(0,j.jsx)("button",{type:"submit",disabled:!r||!s.message,children:"Add post"})]})}})},N=(0,l.memo)((function(t){return(0,j.jsxs)("div",{className:p,children:[(0,j.jsx)("h3",{className:h,children:"My posts"}),(0,j.jsx)("div",{children:(0,j.jsx)(k,{onSubmit:function(e){var r=new Date,s="\n        ".concat(r.getDate().toString().padStart(2,"0"),".").concat((r.getMonth()+1).toString().padStart(2,"0"),".").concat(r.getFullYear(),", ").concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0"));t.addPost({message:e.message,published:s})}})}),(0,j.jsx)("div",{className:f,children:t.postsData.map((function(e){return(0,j.jsx)(g,{message:e.message,like:e.like,photo:t.profile.photos.small,published:e.published},e.id)}))})]})})),_=(0,c.$j)((function(t){return{postsData:t.profilePage.postsData,profile:t.profilePage.profile,status:t.profilePage.status,statusError:t.profilePage.statusError}}),(function(t){return{addPost:function(e){t((0,d.Pi)(e))}}}))(N),w=r(5861);var E=r(181);function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var s,n,o=[],i=!0,a=!1;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(l){a=!0,n=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw n}}return o}}(t,e)||(0,E.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=r(7757),I=r.n(A),M="ProfileInfo_description__tOx+Q",F="ProfileInfo_online__1mSI7",Z=r(4909),D="ProfileStatusWithHooks_statusText__rIjyG",U="ProfileStatusWithHooks_error__W9nzO",O=function(t){var e=C((0,l.useState)(!1),2),r=e[0],s=e[1],n=C((0,l.useState)(t.status),2),o=n[0],i=n[1];(0,l.useEffect)((function(){i(t.status)}),[t.status]);return r?(0,j.jsx)("div",{children:(0,j.jsx)("input",{style:{padding:10},value:o,autoFocus:!0,onBlur:function(){s(!1),t.updateUserStatus(o)},onChange:function(t){i(t.currentTarget.value)}})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{onDoubleClick:function(){s(!0)},className:D,children:o?o.trim():"empty status"}),(0,j.jsx)("div",{className:U,children:t.statusError||""})]})},L=function(t){var e=function(t){var e=t.contactTitle,r=t.contactValue;return(0,j.jsxs)("li",{children:[e,": ",r]})};return(0,j.jsxs)(j.Fragment,{children:[t.isOwner&&(0,j.jsx)("button",{onClick:t.goToEditMode,children:"Edit Data"}),(0,j.jsxs)("dl",{children:[(0,j.jsx)("dt",{children:"Full name:"}),(0,j.jsx)("dd",{children:t.profile.fullName}),(0,j.jsx)("dt",{children:"Looking for a job:"}),(0,j.jsx)("dd",{children:t.profile.lookingForAJob?"Yes":"No"}),(0,j.jsx)("dt",{children:"My professional skills:"}),(0,j.jsx)("dd",{children:t.profile.lookingForAJobDescription}),(0,j.jsx)("dt",{children:"About me:"}),(0,j.jsx)("dd",{children:t.profile.aboutMe})]}),(0,j.jsx)("h3",{children:"Contact:"}),(0,j.jsx)("ul",{children:Object.keys(t.profile.contacts).map((function(r,s){var n=r;return(0,j.jsx)(e,{contactTitle:r,contactValue:t.profile.contacts[n]||"-"},s)}))})]})},T=function(t){var e=t.onSubmit;return(0,j.jsx)(b.l0,{onSubmit:e,initialValues:t.initialValues,render:function(e){var r=e.handleSubmit,s=e.submitErrors;return(0,j.jsxs)("form",{onSubmit:r,children:[(0,j.jsx)("button",{style:{position:"relative",top:"-35px",right:"-145px"},children:"save"}),(0,j.jsx)("div",{style:{color:"red",minHeight:"30px"},children:null===s||void 0===s?void 0:s.submitErrors}),(0,j.jsxs)("dl",{children:[(0,j.jsx)("dt",{children:"Full name:"}),(0,j.jsx)("dd",{children:(0,j.jsx)(b.gN,{type:"text",name:"fullName",placeholder:"Full Name",component:y.N})}),(0,j.jsx)("dt",{children:"Looking for a job:"}),(0,j.jsx)("dd",{children:(0,j.jsx)(b.gN,{type:"checkbox",name:"lookingForAJob",placeholder:"Looking for a job",component:y.N})}),(0,j.jsx)("dt",{children:"My professional skills:"}),(0,j.jsx)("dd",{children:(0,j.jsx)(b.gN,{type:"textarea",name:"lookingForAJobDescription",placeholder:"My professional skills",component:y.N})}),(0,j.jsx)("dt",{children:"About me:"}),(0,j.jsx)("dd",{children:(0,j.jsx)(b.gN,{type:"textarea",name:"AboutMe",placeholder:"About me",component:y.N})})]}),(0,j.jsx)("h3",{children:"Contacts:"}),(0,j.jsx)("ul",{children:Object.keys(t.profile.contacts).map((function(t,e){var r=t;return(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:r}),(0,j.jsx)(b.gN,{type:"text",name:"contacts."+r,placeholder:r,component:y.N})]},e)}))})]})}})},V=function(t){var e=C((0,l.useState)(!1),2),r=e[0],s=e[1];if(!t.profile)return(0,j.jsx)(Z.Z,{});var n=function(){var e=(0,w.Z)(I().mark((function e(r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveProfile(r);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n);case 5:s(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:M,children:[(0,j.jsx)("img",{src:t.profile.photos.large||m,alt:"My photo"}),(0,j.jsx)("div",{className:F}),(0,j.jsx)(O,{status:t.status,updateUserStatus:t.updateUserStatus,statusError:t.statusError}),t.isOwner&&(0,j.jsxs)("button",{children:[(0,j.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){var r;null!==(r=e.target.files)&&void 0!==r&&r.length&&t.savePhoto(e.target.files[0])}}),(0,j.jsx)("label",{htmlFor:"fileInput",children:"Edit Photo"})]}),r?(0,j.jsx)(T,{initialValues:t.profile,onSubmit:n,profile:t.profile}):(0,j.jsx)(L,{profile:t.profile,isOwner:t.isOwner,goToEditMode:function(){return s(!0)}})]})},J=function(t){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(V,{profile:t.profile,status:t.status,updateUserStatus:t.updateUserStatus,isOwner:t.isOwner,savePhoto:t.savePhoto,saveProfile:t.saveProfile,statusError:t.statusError}),(0,j.jsx)(_,{})]})},z=r(9271),H=r(7781),B=r(6477),W=function(t){var e=t.match.params.userId;e||(e=t.authorizedUserId);var r=parseInt(e,10);t.fetchUserProfile(r),t.getUserStatus(r)},Y=function(t){(0,i.Z)(r,t);var e=(0,a.Z)(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){W(this.props)}},{key:"componentDidUpdate",value:function(t,e,r){t.match.params.userId!==this.props.match.params.userId&&W(this.props)}},{key:"render",value:function(){return(0,j.jsx)("div",{className:u.content,children:(0,j.jsx)(J,(0,s.Z)((0,s.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,statusError:this.props.statusError}))})}}]),r}(l.Component),$=(0,H.qC)(B.D,(0,c.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.id,isAuth:t.auth.isAuth,statusError:t.profilePage.statusError}}),{fetchUserProfile:d.YI,getUserStatus:d.Tq,updateUserStatus:d.OL,savePhoto:d.Ju,saveProfile:d.Ii}),z.EN)(Y)},6477:function(t,e,r){r.d(e,{D:function(){return c}});var s=r(1413),n=r(5987),o=(r(2791),r(364)),i=r(9271),a=r(184),l=["isAuth"],u=function(t){return{isAuth:t.auth.isAuth}};function c(t){return(0,o.$j)(u)((function(e){var r=e.isAuth,o=(0,n.Z)(e,l);return r?(0,a.jsx)(t,(0,s.Z)({},o)):(0,a.jsx)(i.l_,{to:"login"})}))}}}]);
//# sourceMappingURL=814.fc1ae932.chunk.js.map